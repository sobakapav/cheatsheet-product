---
import { Markdown } from '@astropub/md';
import { twMerge } from 'tailwind-merge';

import CommonCard from '~/components/common/CommonCard.astro';

import { findImage } from '~/utils/images';

const { post, mode = 'single', hideFields = {}, styles = {} } = Astro.props; 
const image = (await findImage(post.thumbnail?.src || post.image)) as ImageMetadata | undefined;

const myStyles = JSON.parse(JSON.stringify(styles));
myStyles.main = twMerge(myStyles.main, 'blog-list-item');

---
<CommonCard 
  image={image} 
  imagePosition="top"
  link={post.external ? post.externalLink : post.href} 
  title={post.title}
  text={post.excerpt}
  noCard={post.noCard}
  isNew={post.isNew}
  awards={post.awards}
  classes={myStyles}
>
</CommonCard>
